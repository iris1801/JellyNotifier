{% extends 'layout.html' %}

{% block content %}
<div class="container">
    <h1>Dashboard</h1>
    <p>Totale invii automatici: {{ schedules|length }}</p>

    <h2>Invii Programmati</h2>
    {% if schedules %}
        {% for schedule in schedules %}
        <div class="card">
            <h3>{{ schedule.schedule_name }}</h3>
            <p>Oggetto: {{ schedule.subject }}</p>
            <p>Destinatari: {{ schedule.recipients }}</p>
            <p>Orario di Invio: {{ schedule.schedule_time }}</p>
            {% if schedule.is_recurring %}
                <p>Frequenza: {{ schedule.frequency }}</p>
            {% endif %}
        </div>
        {% endfor %}
    {% else %}
        <p>Nessun invio programmato.</p>
    {% endif %}

    <h2>Eventi Monitorati</h2>
    {% if service %}
        <ul>
            {% if service.monitor_media_added %}
                <li>Media Aggiunti (Frequenza: {{ service.media_added_timeframe }})</li>
            {% endif %}
            {% if service.monitor_media_removed %}
                <li>Media Rimossi (Frequenza: {{ service.media_removed_timeframe }})</li>
            {% endif %}
            {% if service.monitor_stream_started %}
                <li>Stream Avviati (Frequenza: {{ service.stream_started_timeframe }})</li>
            {% endif %}
            {% if service.monitor_transcoding %}
                <li>Transcodifica (Frequenza: {{ service.transcoding_timeframe }})</li>
            {% endif %}
        </ul>
    {% else %}
        <p>Nessun evento monitorato. Configura il servizio Jellyfin per iniziare il monitoraggio.</p>
    {% endif %}
</div>
{% endblock %}

